import e,{useState as r,useRef as t,useEffect as n,useMemo as a}from"react";function i(e,r,t,n){return new Promise((a=>{const i=e.animate(r,t),s=()=>{i.cancel()},o=()=>{n.removeEventListener("abort",s),i.removeEventListener("finish",o),a()};n.addEventListener("abort",s),i.addEventListener("finish",o)}))}function s(e){const[a,i]=r(),[s,o]=r();return function(e){const r=t(e);n((()=>{r.current=e})),n((()=>{const e=()=>{"function"==typeof r.current&&r.current()};return requestAnimationFrame(e),window.addEventListener("resize",e,{passive:!0}),()=>{window.removeEventListener("resize",e)}}),[])}((()=>{i((r=>{var t;const n=null==(t=e.current)?void 0:t.getBoundingClientRect().width;return r!==n?n:r})),o((r=>{var t;const n=null==(t=e.current)?void 0:t.getBoundingClientRect().height;return r!==n?n:r}))})),{width:a,height:s}}const o=({children:r,duration:o,easing:l,delay:c,reverse:u=!1})=>{const d=t(null),f=t(null),m=a((()=>({duration:o,easing:l,delay:c,iterations:1,fill:"forwards",direction:u?"reverse":"normal"})),[o,l,c,u]),{height:v}=s(d);return n((()=>{if(!v||!d.current||!f.current)return;const e=v,r=d.current,t=f.current,n=new AbortController;return async function a(){const s=[{transform:"translateY(0px)"},{transform:`translateY(${-1*e}px)`}],o=[{transform:`translateY(${e}px)`},{transform:"translateY(0px)"}],l=[{transform:`translateY(${-1*e}px)`},{transform:`translateY(${-2*e}px)`}],c=i(r,s,m,n.signal).then((()=>i(r,o,m,n.signal))),u=i(t,s,m,n.signal).then((()=>i(t,l,m,n.signal)));return Promise.all([c,u]).then((()=>a()))}(),()=>{n.abort()}}),[v,m]),e.createElement("div",{style:{overflow:"hidden",height:"100%"}},e.createElement("div",{ref:d},r),e.createElement("div",{ref:f},r))},l=({children:r,duration:o,easing:l,delay:c,reverse:u=!1})=>{const d=t(null),f=t(null),m=a((()=>({duration:o,easing:l,delay:c,iterations:1,fill:"forwards",direction:u?"reverse":"normal"})),[o,l,c,u]),{width:v}=s(d);return n((()=>{if(!v||!d.current||!f.current)return;const e=v,r=d.current,t=f.current,n=new AbortController;return async function a(){const s=[{transform:"translateX(0px)"},{transform:`translateX(${-1*e}px)`}],o=[{transform:`translateX(${e}px)`},{transform:"translateX(0px)"}],l=[{transform:`translateX(${-1*e}px)`},{transform:`translateX(${-2*e}px)`}],c=i(r,s,m,n.signal).then((()=>i(r,o,m,n.signal))),u=i(t,s,m,n.signal).then((()=>i(t,l,m,n.signal)));return Promise.all([c,u]).then((()=>a()))}(),()=>{n.abort()}}),[v,m]),e.createElement("div",{style:{overflow:"hidden",display:"flex",flexWrap:"nowrap",width:"100%"}},e.createElement("div",{ref:d,style:{display:"flex"}},r),e.createElement("div",{ref:f,style:{display:"flex"}},r))};export{l as HorizontalTicker,o as VerticalTicker};
