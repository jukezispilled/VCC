{"ast":null,"code":"var _jsxFileName = \"/Users/jukezispilled/VCC/src/pages/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport * as Yup from 'yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginForm = _ref => {\n  let {\n    setAuthToken\n  } = _ref;\n  const handleLogin = async (values, _ref2) => {\n    let {\n      setSubmitting,\n      setErrors\n    } = _ref2;\n    try {\n      const response = await axios.post('http://localhost:3001/users/login', values);\n      const {\n        token\n      } = response.data;\n      setAuthToken(token);\n      localStorage.setItem('authToken', token);\n    } catch (error) {\n      setErrors({\n        password: 'Invalid email or password'\n      });\n      console.log(error);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const validationSchema = Yup.object().shape({\n    email: Yup.string().email('Invalid email address').required('Email is required'),\n    password: Yup.string().required('Password is required')\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-80 bg-[#f6f6f6] rounded-lg xl:p-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: {\n          email: '',\n          password: ''\n        },\n        validationSchema: validationSchema,\n        onSubmit: handleLogin,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              className: \"block\",\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              id: \"email\",\n              type: \"email\",\n              name: \"email\",\n              placeholder: \"Email*\",\n              className: \"w-full px-4 py-2 border rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"email\",\n              component: \"p\",\n              className: \"text-red-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"block\",\n              children: \"Password:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              id: \"password\",\n              type: \"password\",\n              name: \"password\",\n              className: \"w-full px-4 py-2 border rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"password\",\n              component: \"p\",\n              className: \"text-red-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full bg-blue-500 text-white px-4 py-2 rounded transition ease-in-out duration-500 hover:bg-blue-600 font-semibold\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n};\n_c = LoginForm;\nconst AdminDashboard = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Admin Dashboard\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 10\n  }, this);\n};\n_c2 = AdminDashboard;\nconst GeneralUserDashboard = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-5xl font-bold\",\n        children: \"General User Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_c3 = GeneralUserDashboard;\nconst LoginPage = () => {\n  _s();\n  const [authToken, setAuthToken] = useState('');\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n    if (storedToken) {\n      setAuthToken(storedToken);\n    }\n  }, []);\n  let dashboardComponent;\n  if (authToken) {\n    const decodedToken = jwt_decode(authToken);\n    const userRole = decodedToken ? decodedToken.role : '';\n    if (userRole === 'admin') {\n      dashboardComponent = /*#__PURE__*/_jsxDEV(AdminDashboard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 28\n      }, this);\n    } else if (userRole === 'general') {\n      dashboardComponent = /*#__PURE__*/_jsxDEV(GeneralUserDashboard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 28\n      }, this);\n    }\n  }\n  const handleLogout = () => {\n    setAuthToken('');\n    localStorage.removeItem('authToken');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !authToken ? /*#__PURE__*/_jsxDEV(LoginForm, {\n      setAuthToken: setAuthToken\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [dashboardComponent, /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute top-[15%] right-[10%] p-4 bg-red-300 rounded-lg font-semibold\",\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"HzW9TxNAUAELzgxQrE6AODGD+YE=\");\n_c4 = LoginPage;\nexport default LoginPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"LoginForm\");\n$RefreshReg$(_c2, \"AdminDashboard\");\n$RefreshReg$(_c3, \"GeneralUserDashboard\");\n$RefreshReg$(_c4, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","Formik","Form","Field","ErrorMessage","axios","jwt_decode","Yup","LoginForm","setAuthToken","handleLogin","values","setSubmitting","setErrors","response","post","token","data","localStorage","setItem","error","password","console","log","validationSchema","object","shape","email","string","required","AdminDashboard","GeneralUserDashboard","LoginPage","authToken","storedToken","getItem","dashboardComponent","decodedToken","userRole","role","handleLogout","removeItem"],"sources":["/Users/jukezispilled/VCC/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport * as Yup from 'yup';\n\nconst LoginForm = ({ setAuthToken }) => {\n  const handleLogin = async (values, { setSubmitting, setErrors }) => {\n    try {\n      const response = await axios.post('http://localhost:3001/users/login', values);\n      const { token } = response.data;\n\n      setAuthToken(token);\n      localStorage.setItem('authToken', token);\n    } catch (error) {\n      setErrors({ password: 'Invalid email or password' });\n      console.log(error);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const validationSchema = Yup.object().shape({\n    email: Yup.string().email('Invalid email address').required('Email is required'),\n    password: Yup.string().required('Password is required'),\n  });\n\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <div className=\"w-80 bg-[#f6f6f6] rounded-lg xl:p-10\">\n        <h2 className=\"text-2xl font-bold mb-4\">Login</h2>\n        <Formik\n          initialValues={{ email: '', password: '' }}\n          validationSchema={validationSchema}\n          onSubmit={handleLogin}\n        >\n          <Form className=\"space-y-2\">\n            <div>\n              <label htmlFor=\"email\" className=\"block\">\n                Email:\n              </label>\n              <Field\n                id=\"email\"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Email*\"\n                className=\"w-full px-4 py-2 border rounded\"\n              />\n              <ErrorMessage name=\"email\" component=\"p\" className=\"text-red-500\" />\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"block\">\n                Password:\n              </label>\n              <Field\n                id=\"password\"\n                type=\"password\"\n                name=\"password\"\n                className=\"w-full px-4 py-2 border rounded\"\n              />\n              <ErrorMessage name=\"password\" component=\"p\" className=\"text-red-500\" />\n            </div>\n            <button\n              type=\"submit\"\n              className=\"w-full bg-blue-500 text-white px-4 py-2 rounded transition ease-in-out duration-500 hover:bg-blue-600 font-semibold\"\n            >\n              Login\n            </button>\n          </Form>\n        </Formik>\n      </div>\n    </div>\n  );\n};\n\nconst AdminDashboard = () => {\n  return <div>Admin Dashboard</div>;\n};\n\nconst GeneralUserDashboard = () => {\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <div>\n        <div className=\"text-5xl font-bold\">General User Dashboard</div>\n      </div>\n    </div>\n  );\n};\n\nconst LoginPage = () => {\n  const [authToken, setAuthToken] = useState('');\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n\n    if (storedToken) {\n      setAuthToken(storedToken);\n    }\n  }, []);\n\n  let dashboardComponent;\n  if (authToken) {\n    const decodedToken = jwt_decode(authToken);\n    const userRole = decodedToken ? decodedToken.role : '';\n\n    if (userRole === 'admin') {\n      dashboardComponent = <AdminDashboard />;\n    } else if (userRole === 'general') {\n      dashboardComponent = <GeneralUserDashboard />;\n    }\n  }\n\n  const handleLogout = () => {\n    setAuthToken('');\n    localStorage.removeItem('authToken');\n  };\n\n  return (\n    <div>\n      {!authToken ? (\n        <LoginForm setAuthToken={setAuthToken} />\n      ) : (\n        <>\n          {dashboardComponent}\n          <button\n            className=\"absolute top-[15%] right-[10%] p-4 bg-red-300 rounded-lg font-semibold\"\n            onClick={handleLogout}\n          >\n            Logout\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}